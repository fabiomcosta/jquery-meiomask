!function(c){if(!c.browser){c.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),android:-1<navigator.userAgent.toLowerCase().indexOf("mozilla/5.0")&&-1<navigator.userAgent.toLowerCase().indexOf("android ")&&-1<navigator.userAgent.toLowerCase().indexOf("applewebkit"),version:(e=navigator.userAgent,e=e.toLowerCase(),(/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[])[2]||"0")}}window.orientation;var e,t=c.browser.opera||c.browser.mozilla&&parseFloat(c.browser.version.substr(0,3))<1.9?"input":"paste",a=function(e){(e=c.event.fix(e||window.event)).type="paste";var t=e.target;setTimeout(function(){c.event.dispatch.call(t,e)},1)};c.event.special.paste={setup:function(){this.addEventListener?this.addEventListener(t,a,!1):this.attachEvent&&this.attachEvent("on"+t,a)},teardown:function(){this.removeEventListener?this.removeEventListener(t,a,!1):this.detachEvent&&this.detachEvent("on"+t,a)}},c.extend({mask:{rules:{z:/[a-z]/,Z:/[A-Z]/,a:/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-ZçÇáàãâéèêíìóòôõúùü]/},keyRepresentation:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:!1,textAlign:!0,selectCharsOnFocus:!0,autoTab:!0,setSize:!1,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){},onFocus:function(e,t){},onBlur:function(e,t){}},masks:{phone:{mask:"(99) 9999-9999"},"phone-us":{mask:"(999) 999-9999"},cpf:{mask:"999.999.999-99"},cnpj:{mask:"99.999.999/9999-99"},date:{mask:"39/19/9999"},"date-us":{mask:"19/39/9999"},cep:{mask:"99999-999"},time:{mask:"29:59"},cc:{mask:"9999 9999 9999 9999"},integer:{mask:"999.999.999.999",type:"reverse"},decimal:{mask:"99,999.999.999.999",type:"reverse",defaultValue:"000"},"decimal-us":{mask:"99.999,999,999,999",type:"reverse",defaultValue:"000"},"signed-decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"},"signed-decimal-us":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"}},init:function(){if(!this.hasInit){var e,t=this,a=this.keyRepresentation;for(this.ignore=!1,e=0;e<=9;e++)this.rules[e]=new RegExp("[0-"+e+"]");this.keyRep=a,this.ignoreKeys=[],c.each(a,function(e){t.ignoreKeys.push(parseInt(e,10))}),this.hasInit=!0}},set:function(e,l){var u=this,t=c(e),h="maxLength";return l=l||{},this.init(),t.each(function(){l.attr&&(u.options.attr=l.attr);var e,t=c(this),a=c.extend({},u.options),s=t.attr(a.attr);if((e="string"==typeof l?l:""!==s?s:null)&&(a.mask=e),u.masks[e]&&(a=c.extend(a,u.masks[e])),"object"==typeof l&&l.constructor!=Array&&(a=c.extend(a,l)),c.metadata&&(a=c.extend(a,t.metadata())),null!=a.mask){a.mask+="",t.data("mask")&&u.unset(t);var n=a.defaultValue,r="reverse"===a.type,i=new RegExp(a.fixedChars,"g");if(-1===a.maxLength&&(a.maxLength=t.attr(h)),"fixed"!=(a=c.extend({},a,{fixedCharsReg:new RegExp(a.fixedChars),fixedCharsRegG:i,maskArray:a.mask.split(""),maskNonFixedCharsArray:a.mask.replace(i,"").split("")})).type&&!r||!a.setSize||t.attr("size")||t.attr("size",a.mask.length),r&&a.textAlign&&t.css("text-align","right"),""!==this.value||""!==n){var o=u.string(""!==this.value?this.value:n,a);this.defaultValue=o,t.val(o)}"infinite"==a.type&&(a.type="repeat"),t.data("mask",a),t.removeAttr(h),t.bind("keydown.mask",{func:u._onKeyDown,thisObj:u},u._onMask).bind("keypress.mask",{func:u._onKeyPress,thisObj:u},u._onMask).bind("keyup.mask",{func:u._onKeyUp,thisObj:u},u._onMask).bind("paste.mask",{func:u._onPaste,thisObj:u},u._onMask).bind("drop.mask",{func:u._onPaste,thisObj:u},u._onMask).bind("focus.mask",u._onFocus).bind("blur.mask",u._onBlur).bind("change.mask",u._onChange)}})},unset:function(e){return c(e).each(function(){var e=c(this);if(e.data("mask")){var t=e.data("mask").maxLength;-1!=t&&e.attr("maxLength",t),e.unbind(".mask").removeData("mask")}})},string:function(e,t){this.init();var a={};switch("string"!=typeof e&&(e=String(e)),typeof t){case"string":this.masks[t]?a=c.extend(a,this.masks[t]):a.mask=t;break;case"object":a=t}a.fixedChars||(a.fixedChars=this.options.fixedChars);var s=new RegExp(a.fixedChars),n=new RegExp(a.fixedChars,"g");if("reverse"===a.type&&a.defaultValue&&void 0!==this.signals[a.defaultValue.charAt(0)]){var r=e.charAt(0);a.signal=void 0!==this.signals[r]?this.signals[r]:this.signals[a.defaultValue.charAt(0)],a.defaultValue=a.defaultValue.substring(1)}return this.__maskArray(e.split(""),a.mask.replace(n,"").split(""),a.mask.split(""),a.type,a.maxLength,a.defaultValue,s,a.signal)},_onFocus:function(e){var t=c(this),a=t.data("mask");a.inputFocusValue=t.val(),a.changed=!1,a.selectCharsOnFocus&&t.select(),a.onFocus(this,e)},_onBlur:function(e){var t=c(this),a=t.data("mask");a.inputFocusValue==t.val()||a.changed||t.trigger("change"),a.onBlur(this,e)},_onChange:function(e){c(this).data("mask").changed=!0},_onMask:function(e){var t=e.data.thisObj,a={};return a._this=e.target,a.$this=c(a._this),a.data=a.$this.data("mask"),!(!a.$this.attr("readonly")&&a.data)||(a[a.data.type]=!0,a.value=a.$this.val(),a.nKey=t.__getKeyNumber(e),a.range=t.__getRange(a._this),a.valueArray=a.value.split(""),e.data.func.call(t,e,a))},_onKeyDown:function(e,t){if(this.ignore=-1<c.inArray(t.nKey,this.ignoreKeys)||(e.ctrlKey||e.metaKey||e.altKey)&&e.key,this.ignore){var a=this.keyRep[t.nKey];t.data.onValid.call(t._this,a||"",t.nKey)}return!0},_onKeyUp:function(e,t){return 9===t.nKey||16===t.nKey||(t.repeat?(this.__autoTab(t),!0):this._onPaste(e,t))},_onPaste:function(e,t){t.reverse&&this.__changeSignal(e.type,t);var a=this.__maskArray(t.valueArray,t.data.maskNonFixedCharsArray,t.data.maskArray,t.data.type,t.data.maxLength,t.data.defaultValue,t.data.fixedCharsReg,t.data.signal);return t.$this.val(a),!t.reverse&&t.data.defaultValue.length&&t.range.start===t.range.end&&this.__setRange(t._this,t.range.start,t.range.end),!c.browser.msie&&!c.browser.safari||t.reverse||this.__setRange(t._this,t.range.start,t.range.end),this.ignore||this.__autoTab(t),!0},_onKeyPress:function(e,t){if(this.ignore)return!0;t.reverse&&this.__changeSignal(e.type,t);var a=String.fromCharCode(t.nKey),s=t.range.start,n=t.value,r=t.data.maskArray;t.reverse&&(n=n.substr(0,s)+a+n.substr(t.range.end,n.length),t.data.signal&&0<s-t.data.signal.length&&(s-=t.data.signal.length));var i=n.replace(t.data.fixedCharsRegG,"").split(""),o=this.__extraPositionsTill(s,r,t.data.fixedCharsReg);if(t.rsEp=s+o,t.repeat&&(t.rsEp=0),!this.rules[r[t.rsEp]]||-1!=t.data.maxLength&&i.length>=t.data.maxLength&&t.repeat)return t.data.onOverflow.call(t._this,a,t.nKey),!1;if(!this.rules[r[t.rsEp]].test(a))return t.data.onInvalid.call(t._this,a,t.nKey),!1;t.data.onValid.call(t._this,a,t.nKey);var l=this.__maskArray(i,t.data.maskNonFixedCharsArray,r,t.data.type,t.data.maxLength,t.data.defaultValue,t.data.fixedCharsReg,t.data.signal,o);return t.repeat||t.$this.val(l),t.reverse?this._keyPressReverse(e,t):!t.fixed||this._keyPressFixed(e,t)},_keyPressFixed:function(e,t){return t.range.start==t.range.end?(0===t.rsEp&&0===t.value.length||t.rsEp<t.value.length)&&this.__setRange(t._this,t.rsEp,t.rsEp+1):this.__setRange(t._this,t.range.start,t.range.end),!0},_keyPressReverse:function(e,t){return c.browser.msie&&(0===t.range.start&&0===t.range.end||t.range.start!=t.range.end)&&this.__setRange(t._this,t.value.length),!1},__autoTab:function(e){if(e.data.autoTab&&(e.$this.val().length>=e.data.maskArray.length&&!e.repeat||-1!=e.data.maxLength&&e.valueArray.length>=e.data.maxLength&&e.repeat)){var t=this.__getNextInput(e._this,e.data.autoTab);t&&(e.$this.trigger("blur"),t.focus().select())}},__changeSignal:function(e,t){if(!1!==t.data.signal){var a="paste"===e?t.value.charAt(0):String.fromCharCode(t.nKey);this.signals&&void 0!==this.signals[a]&&(t.data.signal=this.signals[a])}},__getKeyNumber:function(e){return e.charCode||e.keyCode||e.which},__maskArray:function(e,t,a,s,n,r,i,o,l){switch("reverse"===s&&e.reverse(),e=this.__removeInvalidChars(e,t,"repeat"===s||"infinite"===s),r&&(e=this.__applyDefaultValue.call(e,r)),e=this.__applyMask(e,a,l,i),s){case"reverse":return e.reverse(),(o||"")+e.join("").substring(e.length-a.length);case"infinite":case"repeat":var u=e.join("");return-1!==n&&e.length>=n?u.substring(0,n):u;default:return e.join("").substring(0,a.length)}return""},__applyDefaultValue:function(e){var t,a=e.length;for(t=this.length-1;0<=t&&this[t]==e.charAt(0);t--)this.pop();for(t=0;t<a;t++)this[t]||(this[t]=e.charAt(t));return this},__removeInvalidChars:function(e,t,a){for(var s=0,n=0;s<e.length;s++)t[n]&&this.rules[t[n]]&&!this.rules[t[n]].test(e[s])&&(e.splice(s,1),a||n--,s--),a||n++;return e},__applyMask:function(e,t,a,s){void 0===a&&(a=0);for(var n=0;n<e.length+a;n++)t[n]&&s.test(t[n])&&e.splice(n,0,t[n]);return e},__extraPositionsTill:function(e,t,a){for(var s=0;a.test(t[e++]);)s++;return s},__getNextInput:function(e,t){var a=e.form;if(null==a)return null;var s,n=a.elements,r=c.inArray(e,n)+1,i=n.length,o=null;for(s=r;s<i;s++)if(o=c(n[s]),this.__isNextInput(o,t))return o;var l,u,h=document.forms,d=c.inArray(e.form,h)+1,g=h.length;for(l=d;l<g;l++)for(i=(u=h[l].elements).length,s=0;s<i;s++)if(o=c(u[s]),this.__isNextInput(o,t))return o;return null},__isNextInput:function(e,t){var a=e.get(0);return a&&(0<a.offsetWidth||0<a.offsetHeight)&&"FIELDSET"!=a.nodeName&&(!0===t||"string"==typeof t&&e.is(t))},__setRange:function(e,t,a){if(void 0===a&&(a=t),e.setSelectionRange)e.setSelectionRange(t,a);else{var s=e.createTextRange();s.collapse(),s.moveStart("character",t),s.moveEnd("character",a-t),s.select()}},__getRange:function(e){if(!c.browser.msie&&!c.browser.android)return{start:e.selectionStart,end:e.selectionEnd};var t={start:0,end:0},a=document.selection.createRange();return t.start=0-a.duplicate().moveStart("character",-1e5),t.end=t.start+a.text.length,t},unmaskedVal:function(e){return c(e).val().replace(c.mask.fixedCharsRegG,"")}}}),c.fn.extend({setMask:function(e){return c.mask.set(this,e)},unsetMask:function(){return c.mask.unset(this)},unmaskedVal:function(){return c.mask.unmaskedVal(this[0])}})}(jQuery);
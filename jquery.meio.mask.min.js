(function(E){if(!E.browser){var B=function(G){G=G.toLowerCase();var F=/(chrome)[ \/]([\w.]+)/.exec(G)||/(webkit)[ \/]([\w.]+)/.exec(G)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(G)||/(msie) ([\w.]+)/.exec(G)||G.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(G)||[];return F[2]||"0"};E.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase()),version:B(navigator.userAgent)}}var D=(window.orientation!=null);var A=((E.browser.opera||(E.browser.mozilla&&parseFloat(E.browser.version.substr(0,3))<1.9))?"input":"paste");var C=function(G){G=E.event.fix(G||window.event);G.type="paste";var F=G.target;setTimeout(function(){E.event.dispatch.call(F,G)},1)};E.event.special.paste={setup:function(){if(this.addEventListener){this.addEventListener(A,C,false)}else{if(this.attachEvent){this.attachEvent("on"+A,C)}}},teardown:function(){if(this.removeEventListener){this.removeEventListener(A,C,false)}else{if(this.detachEvent){this.detachEvent("on"+A,C)}}}};E.extend({mask:{rules:{"z":/[a-z]/,"Z":/[A-Z]/,"a":/[a-zA-Z]/,"*":/[0-9a-zA-Z]/,"@":/[0-9a-zA-ZçÇáàãâéèêíìóòôõúùü]/},keyRepresentation:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"alt",27:"esc",33:"page up",34:"page down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",116:"f5",123:"f12",224:"command"},iphoneKeyRepresentation:{10:"go",127:"delete"},signals:{"+":"","-":"-"},options:{attr:"alt",mask:null,type:"fixed",maxLength:-1,defaultValue:"",signal:false,textAlign:true,selectCharsOnFocus:true,autoTab:true,setSize:false,fixedChars:"[(),.:/ -]",onInvalid:function(){},onValid:function(){},onOverflow:function(){}},masks:{"phone":{mask:"(99) 9999-9999"},"phone-us":{mask:"(999) 999-9999"},"cpf":{mask:"999.999.999-99"},"cnpj":{mask:"99.999.999/9999-99"},"date":{mask:"39/19/9999"},"date-us":{mask:"19/39/9999"},"cep":{mask:"99999-999"},"time":{mask:"29:59"},"cc":{mask:"9999 9999 9999 9999"},"integer":{mask:"999.999.999.999",type:"reverse"},"decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"000"},"decimal-us":{mask:"99.999,999,999,999",type:"reverse",defaultValue:"000"},"signed-decimal":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"},"signed-decimal-us":{mask:"99,999.999.999.999",type:"reverse",defaultValue:"+000"}},init:function(){if(!this.hasInit){var F=this,G,H=(D)?this.iphoneKeyRepresentation:this.keyRepresentation;this.ignore=false;for(G=0;G<=9;G++){this.rules[G]=new RegExp("[0-"+G+"]")}this.keyRep=H;this.ignoreKeys=[];E.each(H,function(I){F.ignoreKeys.push(parseInt(I,10))});this.hasInit=true}},set:function(J,G){var F=this,H=E(J),I="maxLength";G=G||{};this.init();return H.each(function(){if(G.attr){F.options.attr=G.attr}var P=E(this),R=E.extend({},F.options),O=P.attr(R.attr),K="";K=(typeof G=="string")?G:(O!=="")?O:null;if(K){R.mask=K}if(F.masks[K]){R=E.extend(R,F.masks[K])}if(typeof G=="object"&&G.constructor!=Array){R=E.extend(R,G)}if(E.metadata){R=E.extend(R,P.metadata())}if(R.mask!=null){R.mask+="";if(P.data("mask")){F.unset(P)}var L=R.defaultValue,M=(R.type==="reverse"),N=new RegExp(R.fixedChars,"g");if(R.maxLength===-1){R.maxLength=P.attr(I)}R=E.extend({},R,{fixedCharsReg:new RegExp(R.fixedChars),fixedCharsRegG:N,maskArray:R.mask.split(""),maskNonFixedCharsArray:R.mask.replace(N,"").split("")});if((R.type=="fixed"||M)&&R.setSize&&!P.attr("size")){P.attr("size",R.mask.length)}if(M&&R.textAlign){P.css("text-align","right")}if(this.value!==""||L!==""){var Q=F.string((this.value!=="")?this.value:L,R);this.defaultValue=Q;P.val(Q)}if(R.type=="infinite"){R.type="repeat"}P.data("mask",R);P.removeAttr(I);P.bind("keydown.mask",{func:F._onKeyDown,thisObj:F},F._onMask).bind("keypress.mask",{func:F._onKeyPress,thisObj:F},F._onMask).bind("keyup.mask",{func:F._onKeyUp,thisObj:F},F._onMask).bind("paste.mask",{func:F._onPaste,thisObj:F},F._onMask).bind("focus.mask",F._onFocus).bind("blur.mask",F._onBlur).bind("change.mask",F._onChange)}})},unset:function(G){var F=E(G);return F.each(function(){var I=E(this);if(I.data("mask")){var H=I.data("mask").maxLength;if(H!=-1){I.attr("maxLength",H)}I.unbind(".mask").removeData("mask")}})},string:function(K,G){this.init();var J={};if(typeof K!="string"){K=String(K)}switch(typeof G){case"string":if(this.masks[G]){J=E.extend(J,this.masks[G])}else{J.mask=G}break;case"object":J=G}if(!J.fixedChars){J.fixedChars=this.options.fixedChars}var F=new RegExp(J.fixedChars),H=new RegExp(J.fixedChars,"g");if((J.type==="reverse")&&J.defaultValue){if(typeof this.signals[J.defaultValue.charAt(0)]!="undefined"){var I=K.charAt(0);J.signal=(typeof this.signals[I]!="undefined")?this.signals[I]:this.signals[J.defaultValue.charAt(0)];J.defaultValue=J.defaultValue.substring(1)}}return this.__maskArray(K.split(""),J.mask.replace(H,"").split(""),J.mask.split(""),J.type,J.maxLength,J.defaultValue,F,J.signal)},_onFocus:function(H){var G=E(this),F=G.data("mask");F.inputFocusValue=G.val();F.changed=false;if(F.selectCharsOnFocus){G.select()}},_onBlur:function(H){var G=E(this),F=G.data("mask");if(F.inputFocusValue!=G.val()&&!F.changed){G.trigger("change")}},_onChange:function(F){E(this).data("mask").changed=true},_onMask:function(F){var H=F.data.thisObj,G={};G._this=F.target;G.$this=E(G._this);G.data=G.$this.data("mask");if(G.$this.attr("readonly")||!G.data){return true}G[G.data.type]=true;G.value=G.$this.val();G.nKey=H.__getKeyNumber(F);G.range=H.__getRange(G._this);G.valueArray=G.value.split("");return F.data.func.call(H,F,G)},_onKeyDown:function(G,H){this.ignore=E.inArray(H.nKey,this.ignoreKeys)>-1||G.ctrlKey||G.metaKey||G.altKey;if(this.ignore){var F=this.keyRep[H.nKey];H.data.onValid.call(H._this,F||"",H.nKey)}return D?this._onKeyPress(G,H):true},_onKeyUp:function(F,G){if(G.nKey===9||G.nKey===16){return true}if(G.repeat){this.__autoTab(G);return true}return this._onPaste(F,G)},_onPaste:function(G,H){if(H.reverse){this.__changeSignal(G.type,H)}var F=this.__maskArray(H.valueArray,H.data.maskNonFixedCharsArray,H.data.maskArray,H.data.type,H.data.maxLength,H.data.defaultValue,H.data.fixedCharsReg,H.data.signal);H.$this.val(F);if(!H.reverse&&H.data.defaultValue.length&&(H.range.start===H.range.end)){this.__setRange(H._this,H.range.start,H.range.end)}if((E.browser.msie||E.browser.safari)&&!H.reverse){this.__setRange(H._this,H.range.start,H.range.end)}if(this.ignore){return true}this.__autoTab(H);return true},_onKeyPress:function(M,F){if(this.ignore){return true}if(F.reverse){this.__changeSignal(M.type,F)}var N=String.fromCharCode(F.nKey),P=F.range.start,J=F.value,H=F.data.maskArray;if(F.reverse){var I=J.substr(0,P),L=J.substr(F.range.end,J.length);J=I+N+L;if(F.data.signal&&(P-F.data.signal.length>0)){P-=F.data.signal.length}}var O=J.replace(F.data.fixedCharsRegG,"").split(""),G=this.__extraPositionsTill(P,H,F.data.fixedCharsReg);F.rsEp=P+G;if(F.repeat){F.rsEp=0}if(!this.rules[H[F.rsEp]]||(F.data.maxLength!=-1&&O.length>=F.data.maxLength&&F.repeat)){F.data.onOverflow.call(F._this,N,F.nKey);return false}else{if(!this.rules[H[F.rsEp]].test(N)){F.data.onInvalid.call(F._this,N,F.nKey);return false}else{F.data.onValid.call(F._this,N,F.nKey)}}var K=this.__maskArray(O,F.data.maskNonFixedCharsArray,H,F.data.type,F.data.maxLength,F.data.defaultValue,F.data.fixedCharsReg,F.data.signal,G);if(!F.repeat){F.$this.val(K)}return(F.reverse)?this._keyPressReverse(M,F):(F.fixed)?this._keyPressFixed(M,F):true},_keyPressFixed:function(F,G){if(G.range.start==G.range.end){if((G.rsEp===0&&G.value.length===0)||G.rsEp<G.value.length){this.__setRange(G._this,G.rsEp,G.rsEp+1)}}else{this.__setRange(G._this,G.range.start,G.range.end)}return true},_keyPressReverse:function(F,G){if(E.browser.msie&&((G.range.start===0&&G.range.end===0)||G.range.start!=G.range.end)){this.__setRange(G._this,G.value.length)}return false},__autoTab:function(G){if(G.data.autoTab&&((G.$this.val().length>=G.data.maskArray.length&&!G.repeat)||(G.data.maxLength!=-1&&G.valueArray.length>=G.data.maxLength&&G.repeat))){var F=this.__getNextInput(G._this,G.data.autoTab);if(F){G.$this.trigger("blur");F.focus().select()}}},__changeSignal:function(G,H){if(H.data.signal!==false){var F=(G==="paste")?H.value.charAt(0):String.fromCharCode(H.nKey);if(this.signals&&(typeof this.signals[F]!=="undefined")){H.data.signal=this.signals[F]}}},__getKeyNumber:function(F){return(F.charCode||F.keyCode||F.which)},__maskArray:function(N,I,H,K,F,L,O,M,G){if(K==="reverse"){N.reverse()}N=this.__removeInvalidChars(N,I,K==="repeat"||K==="infinite");if(L){N=this.__applyDefaultValue.call(N,L)}N=this.__applyMask(N,H,G,O);switch(K){case"reverse":N.reverse();return(M||"")+N.join("").substring(N.length-H.length);case"infinite":case"repeat":var J=N.join("");return(F!==-1&&N.length>=F)?J.substring(0,F):J;default:return N.join("").substring(0,H.length)}return""},__applyDefaultValue:function(H){var F=H.length,G=this.length,I;for(I=G-1;I>=0;I--){if(this[I]==H.charAt(0)){this.pop()}else{break}}for(I=0;I<F;I++){if(!this[I]){this[I]=H.charAt(I)}}return this},__removeInvalidChars:function(I,H,F){for(var G=0,J=0;G<I.length;G++){if(H[J]&&this.rules[H[J]]&&!this.rules[H[J]].test(I[G])){I.splice(G,1);if(!F){J--}G--}if(!F){J++}}return I},__applyMask:function(I,G,J,F){if(typeof J=="undefined"){J=0}for(var H=0;H<I.length+J;H++){if(G[H]&&F.test(G[H])){I.splice(H,0,G[H])}}return I},__extraPositionsTill:function(I,G,F){var H=0;while(F.test(G[I++])){H++}return H},__getNextInput:function(R,H){var G=R.form;if(G==null){return null}var K=G.elements,J=E.inArray(R,K)+1,M=K.length,P=null,L;for(L=J;L<M;L++){P=E(K[L]);if(this.__isNextInput(P,H)){return P}}var F=document.forms,I=E.inArray(R.form,F)+1,O,N,Q=F.length;for(O=I;O<Q;O++){N=F[O].elements;M=N.length;for(L=0;L<M;L++){P=E(N[L]);if(this.__isNextInput(P,H)){return P}}}return null},__isNextInput:function(H,F){var G=H.get(0);return G&&(G.offsetWidth>0||G.offsetHeight>0)&&G.nodeName!="FIELDSET"&&(F===true||(typeof F=="string"&&H.is(F)))},__setRange:function(H,I,F){if(typeof F=="undefined"){F=I}if(H.setSelectionRange){H.setSelectionRange(I,F)}else{var G=H.createTextRange();G.collapse();G.moveStart("character",I);G.moveEnd("character",F-I);G.select()}},__getRange:function(G){if(!E.browser.msie){return{start:G.selectionStart,end:G.selectionEnd}}var H={start:0,end:0},F=document.selection.createRange();H.start=0-F.duplicate().moveStart("character",-100000);H.end=H.start+F.text.length;return H},unmaskedVal:function(F){return E(F).val().replace(E.mask.fixedCharsRegG,"")}}});E.fn.extend({setMask:function(F){return E.mask.set(this,F)},unsetMask:function(){return E.mask.unset(this)},unmaskedVal:function(){return E.mask.unmaskedVal(this[0])}})})(jQuery)